<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BEAM BLOCKAGE: Beam Blockage (BEAMB)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BEAM BLOCKAGE
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div><div class="header">
  <div class="headertitle"><div class="title">Beam Blockage (BEAMB) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section date"><dt>Date</dt><dd>2 January 2012 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Lars Norin and Anders Henja </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section user"><dt>Copyright </dt><dd>&copy; 2012 by the Swedish Meteorological and Hydrological Institute (SMHI), Norrk&ouml;ping, Sweden</dd></dl>
<dl class="section user"><dt>Legals</dt><dd>BEAMB is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</dd></dl>
<dl class="section user"><dt></dt><dd>BEAMB is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</dd></dl>
<dl class="section user"><dt></dt><dd>You should have received a copy of the GNU Lesser General Public License along with BEAMB. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>. By obtaining, using, and/or copying this software and/or its associated documentation, you agree that you have read, understood, and will comply with the following terms and conditions:</dd></dl>
<h1><a class="anchor" id="introduction"></a>
Introduction</h1>
<p>Beam Blockage has been developed as a software package that should be used together with RAVE. BEAMB comes bundled with two GTOPO30 DEMs covering most of Europe starting at 40 degrees North. These so-called "tiles" are called W020N90 and E020N90. The code base is prepared to process data using W060N90, W020N40, and E020N40, but you have to get and install these yourself.</p>
<p>GTOPO30 resides at <a href="http://www1.gsi.go.jp/geowww/globalmap-gsi/gtopo30/gtopo30.html">http://www1.gsi.go.jp/geowww/globalmap-gsi/gtopo30/gtopo30.html</a> <br  />
</p>
<p>BEAMB does not modify GTOPO tiles at all; it just uses them as they are. This means that processing data consumes a lot of memory, especially if your radar covers an area with topography from more than one tile. However, keep in mind that BEAMB processes a beam-blockage result for a unique location and scan geometry only once, and the result is cached and used subsequently each time the analysis for that scan is requested.</p>
<p>The original software has been developed by Lars Norin and adapted by Anders Henja to integrate properly with the RAVE software.</p>
<h1><a class="anchor" id="installation"></a>
Installation</h1>
<p>The installation is quite straight forward and there are only 3 different parameters that should be specified. &ndash;prefix where beamb should be installed (default is /opt/baltrad/beamb) &ndash;with-rave where rave installation can be found &ndash;localstatedir where the cache files should be stored.</p>
<p>Other than that, it is pretty much the standard configure, make, make test and make install procedure that is necessary.</p>
<pre class="fragment">%&gt; ./configure --prefix=/opt/baltrad/beamb --with-rave=/opt/baltrad/rave --localstatedir=/var
...
%&gt; make
...
%&gt; make test
...
%&gt; make install
</pre><h1><a class="anchor" id="apioverview"></a>
API Overview</h1>
<p>The beam blockage calculations are quite easy to use. The beam blockage object keeps track of the topography handling and mapping so the only thing you really have to do is to provide the object with a scan and a limit for the gaussian approximation.</p>
<p>In Python, it probably looks something like:</p>
<pre class="fragment">import _beamblockage
import _raveio

scan = _raveio.open("scan.h5").object

bb = _beamblockage.new()

# Determine blockage with a -6 dB beamwidth
result = a.getBlockage(scan, -6.0);

# Correct reflectivity for blocking up to 70%, above that "nodata" 
restored = _beamblockage.restore(scan, result, "DBZH", 0.7)

scan.addQualityField(result)

rio = _raveio.new()
rio.object = scan
rio.save("result.h5")</pre><p>The default behaviour for beam blockage is to cache the resulting quality fields since they seldom change. These files are stored in the localstatedir mentioned in <a class="el" href="#installation">Installation</a>. However, you might want to rewrite the cache files or even skip using cache files. This can be done by specifying</p>
<ul>
<li>rewritecache = [True | False] Will rewrite the cache files continously. I.e. basically saves last cache file on disk.</li>
<li>cachedir = [path | None] If path is != None, then the cache files will be placed in this directory. If cachedir = None, no caching is performed.</li>
</ul>
<pre class="fragment">bb = _beamblockage.new()
bb.rewritecache = True  # Keep last result in cache directory
bb.cachedir = None      # Turn of caching
bb.cachedir = "/tmp"    # Put cache files in the tmp directory
</pre> </div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
